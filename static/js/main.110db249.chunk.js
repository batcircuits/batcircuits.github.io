(this["webpackJsonpbat-tree-test"]=this["webpackJsonpbat-tree-test"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var o,i=n(1),c=n.n(i),a=n(8),l=n.n(a),r=(n(13),n(2)),s=n(4),u=n(5),h=n(7),d=n(6),b=(n(14),n(0)),j={},g={},f={},m={},v={},O={},p=0,x=0,w=0,k=0,C=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).title=e.title,o}return Object(u.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:this.title})})}}]),n}(c.a.Component),B=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).onClickConnect=o.onClickConnect.bind(Object(r.a)(o)),o.handleChangeBlah=o.handleChangeBlah.bind(Object(r.a)(o)),o.makePatButton=o.makePatButton.bind(Object(r.a)(o)),o.makeAniButton=o.makeAniButton.bind(Object(r.a)(o)),o.state={connected:!1,allPatterns:[],allAnimations:[]},o}return Object(u.a)(n,[{key:"onClickConnect",value:function(){var e=this,t=[];t.push({name:"BAT Tree"});var n={};n.filters=t,console.log("Reqeusting Bluetooth Device..."),console.log("with "+JSON.stringify(n)),navigator.bluetooth.requestDevice(n).then((function(e){return console.log("Connecting to GATT Server..."),e.gatt.connect()})).then((function(e){return console.log("Getting Primary Service..."),e.getPrimaryService(65504)})).then((function(e){return console.log("Getting Custom Characteristic..."),e.getCharacteristic(65505)})).then((function(t){console.log("We got all the way to the end!"),(o=t).addEventListener("characteristicvaluechanged",e.handleChangeBlah),o.startNotifications(),e.setState((function(){return{connected:!0}}))})).then((function(){O=j,o.writeValueWithoutResponse((new TextEncoder).encode("NumPat\n"))})).catch((function(e){console.log("WRONG! "+e)}))}},{key:"handleChangeBlah",value:function(e){var t=String.fromCharCode.apply(null,new Uint8Array(e.target.value.buffer));if("EOE"!==t)if(O===j){if(p=parseInt(t),console.log("The number of patterns is "+p),0===p)return void console.log("Uh... I guess I need to handle this. But for now, it will break me.");o.writeValueWithoutResponse((new TextEncoder).encode("GetPat 0\n")),x=0,O=g}else if(O===g){console.log("Pattern "+x+": "+t);var n=this.state.allPatterns;if(n.push({name:t,index:x}),x++,this.setState((function(){return{allPaterns:n}})),p>x){var i="GetPat "+x+"\n";o.writeValueWithoutResponse((new TextEncoder).encode(i))}else console.log("I have received all of my patterns?"),console.log(n),O=f,o.writeValueWithoutResponse((new TextEncoder).encode("NumAni\n"))}else if(O===f){if(0===(w=parseInt(t)))return void console.log("Same blah blah broken blah blah");o.writeValueWithoutResponse((new TextEncoder).encode("GetAni 0\n")),O=m}else if(O===m){console.log("Animation "+k+": "+t);var c=this.state.allAnimations;if(c.push({name:t,index:k}),k++,this.setState((function(){return{allAnimations:c}})),w>k){var a="GetAni "+k+"\n";o.writeValueWithoutResponse((new TextEncoder).encode(a))}else console.log("I have received all of my animations?"),console.log(c),O=v}else console.log("Response: ".concat(t));else console.log("Let us ignore the EOE, shall we?")}},{key:"makePatButton",value:function(e,t){return Object(b.jsx)("li",{children:Object(b.jsx)("button",{id:"SetPat "+t,onClick:function(e){o.writeValueWithoutResponse((new TextEncoder).encode("".concat(e.target.id,"\n"))),console.log(e.target.id)},children:e.name})},e.name)}},{key:"makeAniButton",value:function(e,t){return Object(b.jsx)("li",{children:Object(b.jsx)("button",{id:"SetAni "+t,onClick:function(e){o.writeValueWithoutResponse((new TextEncoder).encode("".concat(e.target.id,"\n"))),console.log(e.target.id)},children:e.name})},e.name)}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(C,{title:"BAT Controller"}),!this.state.connected&&Object(b.jsx)("button",{onClick:this.onClickConnect,children:"Connect"}),Object(b.jsx)("ul",{children:this.state.allPatterns.map(this.makePatButton)}),Object(b.jsx)("ul",{children:this.state.allAnimations.map(this.makeAniButton)}),this.state.connected&&Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:function(){o.writeValueWithoutResponse((new TextEncoder).encode("IncBright\n"))},children:"IncBright"}),Object(b.jsx)("button",{onClick:function(){o.writeValueWithoutResponse((new TextEncoder).encode("DecBright\n"))},children:"DecBright"})]}),this.state.connected&&Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:function(){o.writeValueWithoutResponse((new TextEncoder).encode("IncVol\n"))},children:"IncVol"}),Object(b.jsx)("button",{onClick:function(){o.writeValueWithoutResponse((new TextEncoder).encode("DecVol\n"))},children:"DecVol"})]})]})}}]),n}(c.a.Component);l.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(B,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.110db249.chunk.js.map