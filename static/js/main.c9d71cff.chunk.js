(this["webpackJsonpbat-tree-test"]=this["webpackJsonpbat-tree-test"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var o,i=n(1),a=n.n(i),c=n(8),l=n.n(c),r=(n(13),n(2)),s=n(4),u=n(5),h=n(7),d=n(6),b=(n(14),n(0)),f={},g={},j={},m={},v={},O=0,p=0,C=0,x=0;function w(e){return Object(b.jsx)("li",{children:Object(b.jsx)("button",{children:e.name})},e.name)}var k=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).title=e.title,o}return Object(u.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:this.title})})}}]),n}(a.a.Component),A=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).onClickConnect=o.onClickConnect.bind(Object(r.a)(o)),o.handleChangeBlah=o.handleChangeBlah.bind(Object(r.a)(o)),o.makeAniButton=o.makeAniButton.bind(Object(r.a)(o)),o.state={connected:!1,allPatterns:[],allAnimations:[]},o}return Object(u.a)(n,[{key:"onClickConnect",value:function(){var e=this,t=[];t.push({name:"BAT Tree"});var n={};n.filters=t,console.log("Reqeusting Bluetooth Device..."),console.log("with "+JSON.stringify(n)),navigator.bluetooth.requestDevice(n).then((function(e){return console.log("Connecting to GATT Server..."),e.gatt.connect()})).then((function(e){return console.log("Getting Primary Service..."),e.getPrimaryService(65504)})).then((function(e){return console.log("Getting Custom Characteristic..."),e.getCharacteristic(65505)})).then((function(t){console.log("We got all the way to the end!"),(o=t).addEventListener("characteristicvaluechanged",e.handleChangeBlah),o.startNotifications(),e.setState((function(){return{connected:!0}}))})).then((function(){v=f,o.writeValueWithoutResponse((new TextEncoder).encode("NumPat\n"))})).catch((function(e){console.log("WRONG! "+e)}))}},{key:"handleChangeBlah",value:function(e){var t=String.fromCharCode.apply(null,new Uint8Array(e.target.value.buffer));if("EOE"!==t){if(v===f){if(O=parseInt(t),console.log("The number of patterns is "+O),0===O)return void console.log("Uh... I guess I need to handle this. But for now, it will break me.");o.writeValueWithoutResponse((new TextEncoder).encode("GetPat 0\n")),p=0,v=g}else if(v===g){console.log("Pattern "+p+": "+t);var n=this.state.allPatterns;if(n.push({name:t,index:p}),p++,this.setState((function(){return{allPaterns:n}})),O>p){var i="GetPat "+p+"\n";o.writeValueWithoutResponse((new TextEncoder).encode(i))}else console.log("I have received all of my patterns?"),console.log(n),v=j,o.writeValueWithoutResponse((new TextEncoder).encode("NumAni\n"))}else if(v===j){if(0===(C=parseInt(t)))return void console.log("Same blah blah broken blah blah");o.writeValueWithoutResponse((new TextEncoder).encode("GetAni 0\n")),v=m}else if(v===m){console.log("Animation "+x+": "+t);var a=this.state.allAnimations;if(a.push({name:t,index:x}),x++,this.setState((function(){return{allAnimations:a}})),C>x){var c="GetAni "+x+"\n";o.writeValueWithoutResponse((new TextEncoder).encode(c))}else console.log("I have received all of my animations?"),console.log(a)}}else console.log("Let us ignore the EOE, shall we?")}},{key:"makeAniButton",value:function(e){return Object(b.jsx)("li",{children:Object(b.jsx)("button",{children:e.name})},e.name)}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(k,{title:"BAT Controller"}),!this.state.connected&&Object(b.jsx)("button",{onClick:this.onClickConnect,children:"Connect"}),Object(b.jsx)("ul",{children:this.state.allPatterns.map(w,this)}),Object(b.jsx)("ul",{children:this.state.allAnimations.map(this.makeAniButton)})]})}}]),n}(a.a.Component);l.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(A,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.c9d71cff.chunk.js.map